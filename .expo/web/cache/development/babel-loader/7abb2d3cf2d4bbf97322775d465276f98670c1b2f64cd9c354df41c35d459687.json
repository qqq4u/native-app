{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Post from \"../components/Post\";\nimport React, { useEffect, useState } from \"react\";\nimport { axiosInstance } from \"../API\";\nimport SearchBar from \"../components/SearchBar\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar HomeScreen = function HomeScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    items = _useState4[0],\n    setItems = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    query = _useState6[0],\n    setQuery = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    clicked = _useState8[0],\n    setClicked = _useState8[1];\n  var fetchPosts = function fetchPosts() {\n    setIsLoading(true);\n    axiosInstance.get(`/parkings/search?query=${query}`).then(function (_ref2) {\n      var data = _ref2.data;\n      setItems(data[\"groups\"]);\n    }).catch(function (err) {\n      alert(err);\n    }).finally(function () {\n      setIsLoading(false);\n    });\n  };\n  useEffect(fetchPosts, [query]);\n  var renderItem = function renderItem(_ref3) {\n    var item = _ref3.item;\n    return _jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate(\"FullPost\", {\n          id: item.id,\n          name: item.name\n        });\n      },\n      children: _jsx(Post, {\n        navigation: navigation,\n        id: item.id,\n        name: item.name,\n        item: item\n      })\n    });\n  };\n  return _jsxs(View, {\n    children: [_jsx(SearchBar, {\n      searchPhrase: query,\n      setSearchPhrase: setQuery,\n      clicked: clicked,\n      setClicked: setClicked\n    }), _jsx(FlatList, {\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: isLoading,\n        onRefresh: fetchPosts\n      }),\n      data: items,\n      renderItem: renderItem\n    })]\n  });\n};\nexport default HomeScreen;","map":{"version":3,"names":["Post","React","useEffect","useState","axiosInstance","SearchBar","jsx","_jsx","jsxs","_jsxs","HomeScreen","_ref","navigation","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","items","setItems","_useState5","_useState6","query","setQuery","_useState7","_useState8","clicked","setClicked","fetchPosts","get","then","_ref2","data","catch","err","alert","finally","renderItem","_ref3","item","TouchableOpacity","onPress","navigate","id","name","children","View","searchPhrase","setSearchPhrase","FlatList","refreshControl","RefreshControl","refreshing","onRefresh"],"sources":["/Users/qqq/Documents/University/3course/5term/РИП/733/screens/HomeScreen.jsx"],"sourcesContent":["import { View, FlatList, RefreshControl, TouchableOpacity} from 'react-native';\nimport Post from \"../components/Post\";\nimport React, {useEffect, useState} from \"react\";\nimport {axiosInstance} from \"../API\";\nimport SearchBar from \"../components/SearchBar\";\n\nconst HomeScreen =({ navigation }) => {\n\n    const [isLoading, setIsLoading] = useState(true)\n    const [items, setItems] = useState([])\n    const [query, setQuery] = useState(\"\")\n    const [clicked, setClicked] = useState(false)\n\n\n    const fetchPosts = () => {\n        setIsLoading(true)\n        axiosInstance\n            .get(`/parkings/search?query=${query}`)\n            .then(({data}) => {\n                setItems(data[\"groups\"])\n            })\n            .catch((err) => {\n                alert(err)\n            })\n            .finally(() => {\n                setIsLoading(false)\n            })\n    }\n\n    useEffect(fetchPosts, [query])\n\n    const renderItem = ({ item }) => (\n        <TouchableOpacity onPress={() => navigation.navigate(\"FullPost\", {id: item.id, name: item.name })}>\n            <Post navigation={navigation} id={item.id} name={item.name} item={item} />\n        </TouchableOpacity>\n    )\n\n    return (\n        <View>\n\n            <SearchBar searchPhrase={query} setSearchPhrase={setQuery} clicked={clicked} setClicked={setClicked} />\n\n            <FlatList\n                refreshControl={<RefreshControl refreshing={isLoading} onRefresh={fetchPosts} />}\n                data={items}\n                renderItem={renderItem}\n            />\n\n        </View>\n    );\n}\n\nexport default HomeScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}